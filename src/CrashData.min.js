function AStyleTable(e){var t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),document.getElementsByTagName("head")[0].appendChild(t)}function CreateDelete(e){let t=document.getElementById(e),l=t.querySelector("tbody"),a=t.querySelector("thead"),o=t.querySelector("tfoot"),n=l.querySelectorAll("tr"),r=a.querySelector("tr"),i=o.querySelector("tr"),s=document.createElement("th"),d=document.createElement("th");s.textContent="Delete",d.textContent="",r.appendChild(s),i.appendChild(d),n.forEach((e,t)=>{let l=document.createElement("td");l.innerHTML='<svg class="icon-delete" id="hapus'+t+'" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="#fa0000"  class="icon icon-tabler icons-tabler-filled icon-tabler-square-rounded-x"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 2l.324 .001l.318 .004l.616 .017l.299 .013l.579 .034l.553 .046c4.785 .464 6.732 2.411 7.196 7.196l.046 .553l.034 .579c.005 .098 .01 .198 .013 .299l.017 .616l.005 .642l-.005 .642l-.017 .616l-.013 .299l-.034 .579l-.046 .553c-.464 4.785 -2.411 6.732 -7.196 7.196l-.553 .046l-.579 .034c-.098 .005 -.198 .01 -.299 .013l-.616 .017l-.642 .005l-.642 -.005l-.616 -.017l-.299 -.013l-.579 -.034l-.553 -.046c-4.785 -.464 -6.732 -2.411 -7.196 -7.196l-.046 -.553l-.034 -.579a28.058 28.058 0 0 1 -.013 -.299l-.017 -.616c-.003 -.21 -.005 -.424 -.005 -.642l.001 -.324l.004 -.318l.017 -.616l.013 -.299l.034 -.579l.046 -.553c.464 -4.785 2.411 -6.732 7.196 -7.196l.553 -.046l.579 -.034c.098 -.005 .198 -.01 .299 -.013l.616 -.017c.21 -.003 .424 -.005 .642 -.005zm-1.489 7.14a1 1 0 0 0 -1.218 1.567l1.292 1.293l-1.292 1.293l-.083 .094a1 1 0 0 0 1.497 1.32l1.293 -1.292l1.293 1.292l.094 .083a1 1 0 0 0 1.32 -1.497l-1.292 -1.293l1.292 -1.293l.083 -.094a1 1 0 0 0 -1.497 -1.32l-1.293 1.292l-1.293 -1.292l-.094 -.083z" fill="#fa0000" stroke-width="0" /></svg>',e.appendChild(l)})}function CreateInfo(e){let t=document.getElementById(e),l=t.querySelector("tbody"),a=t.querySelector("thead"),o=t.querySelector("tfoot"),n=l.querySelectorAll("tr"),r=a.querySelector("tr"),i=o.querySelector("tr"),s=document.createElement("th"),d=document.createElement("th");s.textContent="Detail",d.textContent="",r.appendChild(s),i.appendChild(d),n.forEach((e,t)=>{let l=document.createElement("td");l.innerHTML='<svg class="icon-info" id="info'+t+'" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="#11ff00"  class="icon icon-tabler icons-tabler-filled icon-tabler-info-square-rounded"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 2l.642 .005l.616 .017l.299 .013l.579 .034l.553 .046c4.687 .455 6.65 2.333 7.166 6.906l.03 .29l.046 .553l.041 .727l.006 .15l.017 .617l.005 .642l-.005 .642l-.017 .616l-.013 .299l-.034 .579l-.046 .553c-.455 4.687 -2.333 6.65 -6.906 7.166l-.29 .03l-.553 .046l-.727 .041l-.15 .006l-.617 .017l-.642 .005l-.642 -.005l-.616 -.017l-.299 -.013l-.579 -.034l-.553 -.046c-4.687 -.455 -6.65 -2.333 -7.166 -6.906l-.03 -.29l-.046 -.553l-.041 -.727l-.006 -.15l-.017 -.617l-.004 -.318v-.648l.004 -.318l.017 -.616l.013 -.299l.034 -.579l.046 -.553c.455 -4.687 2.333 -6.65 6.906 -7.166l.29 -.03l.553 -.046l.727 -.041l.15 -.006l.617 -.017c.21 -.003 .424 -.005 .642 -.005zm0 9h-1l-.117 .007a1 1 0 0 0 0 1.986l.117 .007v3l.007 .117a1 1 0 0 0 .876 .876l.117 .007h1l.117 -.007a1 1 0 0 0 .876 -.876l.007 -.117l-.007 -.117a1 1 0 0 0 -.764 -.857l-.112 -.02l-.117 -.006v-3l-.007 -.117a1 1 0 0 0 -.876 -.876l-.117 -.007zm.01 -3l-.127 .007a1 1 0 0 0 0 1.986l.117 .007l.127 -.007a1 1 0 0 0 0 -1.986l-.117 -.007z" /></svg>',e.appendChild(l)})}function ResizeTable(e){$("#"+e+" th").css("cursor","col-resize");var t,l,a=!1,o=void 0;$("#"+e+" th").mousedown(function(e){o=$(this),a=!0,t=e.pageX,l=$(this).width(),$(o).addClass("resizing"),console.log(o)}),$(document).mousemove(function(e){a&&$(o).width(l+(e.pageX-t))}),$(document).mouseup(function(){a&&($(o).removeClass("resizing"),a=!1)})}function Modal(e,t,l="Close",a="",o=()=>{}){var n=_buildModal(e,t,l,a,o);document.body.append(n),this.bsModal=bootstrap.Modal.getOrCreateInstance(n),this.show=function(){this.bsModal.show()}}function DeleteModal(){$(".modal").remove(),$(".modal-custom").remove(),$(".modal-backdrop").remove(),$(".modal-dialog").remove(),$("body").removeClass("modal-open"),$("body").removeAttr("style")}function _buildModal(e,t,l,a,o){var n=document.createElement("div");n.setAttribute("class","modal fade modal-custom"),n.setAttribute("tabindex","-1"),n.setAttribute("aria-labelledby","modalLabel"),n.setAttribute("aria-hidden","true");var r=document.createElement("div");r.setAttribute("class","modal-dialog");var i=document.createElement("div");i.setAttribute("class","modal-content");var s=_buildModalHeader(e);i.append(s);var d=document.createElement("div");d.setAttribute("class","modal-body"),d.innerHTML=t,i.append(d);var c=_buildModalFooter(l,a,o);return i.append(c),r.append(i),n.append(r),n}function _buildModalHeader(e){var t=document.createElement("div");t.setAttribute("class","modal-header"),t.setAttribute("style","border-bottom: none;");var l=document.createElement("h5");l.setAttribute("class","modal-title"),l.setAttribute("id","modalLabel"),l.innerText=e;var a=document.createElement("button");return a.setAttribute("class","btn-close"),a.setAttribute("data-bs-dismiss","modal"),a.setAttribute("aria-label","Close"),t.append(l),t.append(a),t}function _buildModalFooter(e,t,l){var a=document.createElement("div");a.setAttribute("class","modal-footer"),a.setAttribute("style","border-top: none;");var o=document.createElement("button");if(o.setAttribute("type","button"),o.setAttribute("class","btn btn-secondary"),o.setAttribute("data-bs-dismiss","modal"),o.innerText=e,a.append(o),t&&l){var n=document.createElement("button");n.setAttribute("type","button"),n.setAttribute("class","btn btn-primary"),n.innerText=t,n.addEventListener("click",l),a.append(n)}return a}function ShowDetailTable(e){table=e.table,idTable=e.id,headerModal=e.header_detail,customDetail=e.custom_value,valueDetail=e.value_html,CreateInfo(idTable),$("#"+idTable+" tbody").on("click","tr svg.icon-info",function(){var e=table.rows(this.closest("tr")).data(),t="",l=e.cell(this);if(console.log(l),e.length>=1)for(var a=0;a<e.length;a++){var o=l.context[0].aoColumns;for(let n=0;n<o.length;n++){let r=o[n].sTitle;console.log(r),t=t+"<details><summary>"+r+"</summary>  <p>"+e[a][n]+"</p></details>"}}else alert("Please select member data.");customDetail?new Modal(headerModal,valueDetail,"Close","Confirm",()=>!1).show():new Modal(headerModal,t,"Close","Confirm",()=>!1).show()})}function EditTable(e){var t=e.id,l=e.table,a=e.row_id,o=e.convert_html,n=e.rageEx,r=e.url,i=e.url_load,s=e.id_div_callback;$("#"+t+" tbody").on("dblclick","td",function(){var t=$(this).attr("alias"),d=l.cell(this),c=d["0"][0].column,u=d["0"][0].row,_=d.context[0].aoData[u]._aData[a];d.context[0].aoColumns[c].sTitle;var p=d.data();if(o)var f=_.replace(n,"");else var f=_;console.log(f),console.log(t);var h=p.toString();if(document.getElementById(e.id_body_table).getElementsByTagName("input").length>0)return Swal.fire({title:"Silahkan Selesaikan Edit Table Terlebih Dahulu",text:"",type:"error"}).then(function(e){$("input").focus()}),!1;if(-1===h.search("<input")){d.data('<input type="text" class="form-edit" id="input'+_+'" value="'+p+'"/>');var m=document.getElementById(`input${_}`);m.addEventListener("keyup",function(e){if("Enter"===e.key){e.preventDefault();var l={};l.value=m.value,l.parameters=t,l.code=f,updateField__(f,_,r,l,t,e=>{e?Swal.fire({title:e,text:"",type:"error"}).then(function(e){return!1}):Swal.fire({title:"Berhasil Update",text:"",type:"error"}).then(function(e){LoadData(i,s)})})}})}})}$.fn.CrashDataTable=function(e,t,l){let a={};var o={},n={},r={},i={},s={},d={},c={},u={},_={},p={},f=e.TotalFormadd,h=e.ConfigForm,m=e.StartFixedCloumn,b=e.ConfigButton;e.GroupRowSpan;var v=e.InfiniteScroll,g=e.InfiniteConfig;if(e.WordBreakTable&&AStyleTable("table#custom-table tbody td {word-break: break-word;vertical-align: top;}"),v&&(p={serverSide:!0,processing:!0,scroller:{loadingIndicator:!0},scrollY:200,deferRender:!0,ajax:{url:g.DataAjax,type:"get",dataSrc:function(e){return $("#query").html("").append(e.query),e.aaData},columns:g.ColoumnData}}),e.ButtonHeader&&(b.Excel&&(d={text:"Export Excel",className:"btn btn-outline-success",action:function(){ExportExcelTable(e.id,"Export Excel.xlsx")}}),b.Copy&&(_={text:"Copy Data",className:"btn btn-outline-info",action:function(){var t=document.getElementById(e.id),l=document.createRange();l.selectNode(t),window.getSelection().addRange(l),document.execCommand("copy"),Swal.fire({title:"Copy Data",text:"Silahkan Paste Data",icon:"success"})}}),b.Pdf&&(c={text:"Export PDF",className:"btn btn-outline-danger",action:function(){var t=new jsPDF;t.autoTable({html:$("#"+e.id).get(0),headStyles:{halign:"center",valign:"middle"},bodyStyles:{halign:"center"},margin:{top:30}}),t.save("Export PDF.pdf")}}),b.AddData&&(u={text:"Add Data",className:"btn btn-outline-primary",action:function(e,t,l,o){console.log(e);var n="";for(let r=0;r<f;r++)n=n+'<div class="col-lg-12"><input class="form-control" placeholder="'+(placeholder=h.Placehorder[r])+'" id="'+(idForm=h.id[r])+r+'"></div><br> ';new Modal("Add Data",n,"Close","Confirm",()=>{let e=h.UrlLinkEnd,t=h.urlLoad,l=h.idDivCall;for(let o=0;o<f;o++){let n=h.id[o];h.Placehorder[o];let r=document.getElementById(n+o).value;a[n]=r}console.log(a),$.ajax({type:"POST",url:e,data:a}).success(function(e){Swal.fire({title:"Berhasil!",text:"Anda Berhasil Input Data",icon:"success"});for(let o=0;o<f;o++){let n=h.id[o];h.Placehorder[o];let r=document.getElementById(n+o).value="";a[n]=r}DeleteModal(),LoadData(t,l)})}).show()}}),s={dom:"Bfrtip",buttons:{dom:{button:{className:"btn"}},buttons:[d,c,_,u]}}),e.ResizeTable&&ResizeTable(e.id),e.ShortTable&&(n={iDisplayLength:-1,aaSorting:[[e.ShortingRow,e.TypeShorting]]}),e.RowGroup){var y=e.ConfigGroup;r=y.DropdownGroup?{columnDefs:[{visible:!1,targets:y.GroupsColumn}],order:[[y.GroupsColumn,"asc"]],rowGroup:{dataSrc:y.GroupsColumn,startRender:function(e,t){var l=!!collapsedGroups[t];return e.nodes().each(function(e){e.style.display="",l?(e.style.display="none",svgdata='<svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="#ffff"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-square-rounded-plus"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 3c7.2 0 9 1.8 9 9s-1.8 9 -9 9s-9 -1.8 -9 -9s1.8 -9 9 -9z" /><path d="M15 12h-6" /><path d="M12 9v6" /></svg>'):svgdata='<svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="#ffff"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-square-rounded-minus"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 12h6" /><path d="M12 3c7.2 0 9 1.8 9 9s-1.8 9 -9 9s-9 -1.8 -9 -9s1.8 -9 9 -9z" /></svg>'}),$("<tr/>").append('<td colspan="'+y.GroupRowSpan+'" class="group bg-secondary text-white collapse-crash">'+svgdata+"  "+t+" ("+e.count()+")</td>").attr("data-name",t).toggleClass("collapsed",l)}}}:{columnDefs:[{visible:!1,targets:y.GroupsColumn}],order:[[y.GroupsColumn,"asc"]],drawCallback:function(e){var t=this.api(),l=t.rows({page:"current"}).nodes(),a=null;t.column(y.GroupsColumn,{page:"current"}).data().each(function(e,t){a!==e&&($(l).eq(t).before('<tr class="group bg-secondary text-white" data-f-color="f9f9f9" data-fill-color="000000" ><td style="font-size: 15px;" colspan="'+y.GroupRowSpan+'">'+e+"</td></tr>"),a=e)})}}}e.FixedCloumn&&(i={fixedColumns:{start:m}}),e.button?o={dom:"Bfrtip",buttons:{dom:{button:{className:"btn"}},buttons:[{text:"Export Excel",className:"btn btn-outline-success",action:function(){ExportExcelTable(e.id,"Export Excel.xlsx")}},{text:"Export PDF",className:"btn btn-outline-danger",action:function(){var t=new jsPDF;t.autoTable({html:"#"+e.id}),t.save("CrashDataTable.pdf")}},{text:"Add Data",className:"btn btn-outline-primary",action:function(e,t,l,o){console.log(e);var n="";for(let r=0;r<f;r++)n=n+'<div class="col-lg-12"><input class="form-control" placeholder="'+(placeholder=h.Placehorder[r])+'" id="'+(idForm=h.id[r])+r+'"></div><br> ';new Modal("Add Data",n,"Close","Confirm",()=>{let e=h.UrlLinkEnd,t=h.urlLoad,l=h.idDivCall;for(let o=0;o<f;o++){let n=h.id[o];h.Placehorder[o];let r=document.getElementById(n+o).value;a[n]=r}$.ajax({type:"POST",url:e,data:a}).success(function(e){Swal.fire({title:"Berhasil!",text:"Anda Berhasil Input Data",icon:"success"});for(let o=0;o<f;o++){let n=h.id[o];h.Placehorder[o];let r=document.getElementById(n+o).value="";a[n]=r}DeleteModal(),LoadData(t,l)})}).show()}}]},initComplete:function(){this.api().columns().every(function(){let e=this,t=e.footer().textContent,l=document.createElement("input");l.classList.add("form-footer"),l.style.width="auto",l.placeholder=t,e.footer().replaceChildren(l),l.addEventListener("keyup",()=>{e.search()!==this.value&&e.search(l.value).draw()})})}}:e.Excel?o={dom:"Bfrtip",buttons:{dom:{button:{className:"btn"}},buttons:[{text:"Export Excel",className:"btn btn-outline-success",action:function(){ExportExcelTable(e.id,"Export Excel.xlsx")}}]}}:e.Pdf?o={dom:"Bfrtip",buttons:{dom:{button:{className:"btn"}},buttons:[{text:"Export PDF",className:"btn btn-outline-danger",action:function(){var t=new jsPDF;t.autoTable({html:"#"+e.id}),t.save("CrashDataTable.pdf")}}]}}:e.SearchFooter?o={initComplete:function(){this.api().columns().every(function(){let e=this,t=e.footer().textContent,l=document.createElement("input");l.classList.add("form-footer"),l.style.width="auto",l.placeholder=t,e.footer().replaceChildren(l),l.addEventListener("keyup",()=>{e.search()!==this.value&&e.search(l.value).draw()})})}}:e.ButtonAddData&&(o={dom:"Bfrtip",buttons:{dom:{button:{className:"btn"}},buttons:[{text:"Add Data",className:"btn btn-outline-primary",action:function(e,t,l,o){var n="";for(let r=0;r<f;r++)n=n+'<div class="col-lg-12"><input class="form-control" placeholder="'+(placeholder=h.Placehorder[r])+'" id="'+(idForm=h.id[r])+r+'"></div><br> ';new Modal("Add Data",n,"Close","Confirm",()=>{let e=h.UrlEndPoint,t=h.urlLoad,l=h.idDivCall;for(let o=0;o<f;o++){let n=h.id[o];h.Placehorder[o];let r=document.getElementById(n+o).value;a[n]=r}$.ajax({type:"POST",url:e,data:a}).success(function(e){Swal.fire({title:"Berhasil!",text:"Anda Berhasil Input Data",icon:"success"}),DeleteModal(),LoadData(t,l)})}).show()}}]}});let x={...o,...t,...n,...i,...r,...s,...p};return this.DataTable(x)};const updateField__=(e,t,l,a,o,n)=>{console.log(a),""==o&&Swal.fire({title:err,text:"",type:"Tidak Dapat Mengedit Data !"}).then(function(e){return!1}),$.ajax({type:"POST",url:l,data:a}).success(function(e){n(null)}).error(function(e){n(e)})};function LoadData(e,t){$.LoadingOverlay("show"),$("#"+t).empty(),$("#"+t).load(e,function(e,t,l){"error"==t?($.LoadingOverlay("hide"),Swal.fire({title:"Sorry but there was an error: "+l.status+" "+l.statusText,text:"",type:"error"}).then(function(e){return!1})):$.LoadingOverlay("hide")})}function DeleteData(e){console.log(e);var t=e.id,l=e.WhereId;e.table;var a=e.UrlEndPoint,o=e.EndPointNameDB,n=e.urlLoad,r=e.DivCallback;CreateDelete(t),$("#"+e.id+" tbody").on("click","tr svg.icon-delete",function(){let t=this.closest("tr"),i=t.cells[l].textContent;console.log(i),Swal.fire({title:"Are you sure?",text:"Anda Akan Menghapus Data Ini !",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(t=>{t.isConfirmed&&(data={database:o,id:i},$.ajax({type:"POST",url:a,data:data}).success(function(t){e.table.row($(this).parents("tr")).remove().draw(),Swal.fire({title:"Deleted!",text:"Your file has been deleted.",icon:"success"}),LoadData(n,r)}).error(function(e){Swal.fire({title:"Deleted!",text:"Your file has been Not deleted.",icon:"error"})}))})})}function ExportExcelTable(e,t){let l=document.getElementById(e),a=l.getElementsByTagName("tr");for(let o=0;o<a.length;o++){let n=a[o].getElementsByTagName("td");if(o%2!=0)for(let r=0;r<n.length;r++)n[r].setAttribute("data-fill-color","e2fbff");else for(let i=0;i<n.length;i++)n[i].setAttribute("data-fill-color","f2f2f2")}TableToExcel.convert(document.getElementById(e),{name:t,sheet:{name:"Sheet 1"}})}function GenerateChartCrash(e){var t=e.DataChart;console.log(t.typechart);var l=Highcharts.chart(e.IdDiv,{data:{},chart:{type:t.typechart},title:{text:e.TitleChart},xAxis:{type:"category"},series:[{name:t.namedata}]});e.IdTable.on("draw",function(){DrawChartCrash(e.IdTable,l,t)}),DrawChartCrash(e.IdTable,l,t)}function DrawChartCrash(e,t,l){var a=e.rows({search:"applied"}).data().map(function(e){let t=typeof e[l.value],a=typeof e[l.data];if(console.log(a),"string"==t&&"string"==a)var o=e[l.data],n=1*e[l.value].replace(",",""),r=[o,n];else if("number"==t&&"number"==a)var o=1*e[l.data],n=1*e[l.value].replace(",",""),r=[o,n];return console.log(o),r}).toArray();console.log(a),t.series[0].setData(a)}